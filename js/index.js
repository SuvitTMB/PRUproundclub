var _0x3966b2=_0x58b4;(function(_0x526b50,_0x1c18a3){var _0x293106=_0x58b4,_0x229639=_0x526b50();while(!![]){try{var _0x3fbd87=-parseInt(_0x293106(0x1a3))/0x1*(-parseInt(_0x293106(0x1c4))/0x2)+parseInt(_0x293106(0x19f))/0x3+-parseInt(_0x293106(0x19c))/0x4+-parseInt(_0x293106(0x1a8))/0x5*(parseInt(_0x293106(0x1cc))/0x6)+parseInt(_0x293106(0x1aa))/0x7+parseInt(_0x293106(0x1ac))/0x8+parseInt(_0x293106(0x1b8))/0x9;if(_0x3fbd87===_0x1c18a3)break;else _0x229639['push'](_0x229639['shift']());}catch(_0x68a844){_0x229639['push'](_0x229639['shift']());}}}(_0xd19c,0xbf7bc));var i=0x0,EidProfile='',dateString='',xProduct=_0x3966b2(0x1d4),CheckFoundData=0x0;$(document)['ready'](function(){main();});async function main(){var _0x527fd6=_0x3966b2;await liff[_0x527fd6(0x198)]({'liffId':_0x527fd6(0x1ce)}),document['getElementById'](_0x527fd6(0x1b4))[_0x527fd6(0x1d6)](liff[_0x527fd6(0x1b4)]()),liff['isLoggedIn']()?getUserProfile():liff[_0x527fd6(0x1ca)]();}async function getUserProfile(){var _0x41f59d=_0x3966b2,_0x32b8c5='';const _0x30fd2d=await liff['getProfile']();sessionStorage['setItem'](_0x41f59d(0x1a7),_0x30fd2d['userId']),sessionStorage['setItem']('LineName',_0x30fd2d['displayName']),sessionStorage['setItem'](_0x41f59d(0x1c2),_0x30fd2d['pictureUrl']),Connect_DB();}function openWindow(){liff['openWindow']({'url':'https://line.me','external':!![]});}function Connect_DB(){var _0x56cebe=_0x3966b2,_0x3a9f40={'apiKey':'AIzaSyDfTJJ425U4OY0xac6jdhtSxDeuJ-OF-lE','authDomain':'retailproject-6f4fc.firebaseapp.com','projectId':_0x56cebe(0x1d1),'storageBucket':_0x56cebe(0x1bc),'messagingSenderId':'653667385625','appId':_0x56cebe(0x1cf),'measurementId':'G-9SKTRHHSW9'};firebase['initializeApp'](_0x3a9f40),dbProfile=firebase[_0x56cebe(0x1b1)]()[_0x56cebe(0x1ba)](_0x56cebe(0x1d5)),dbSellerCampaign=firebase[_0x56cebe(0x1b1)]()[_0x56cebe(0x1ba)]('SellerCampaign'),dbPRUredeemPoint=firebase[_0x56cebe(0x1b1)]()[_0x56cebe(0x1ba)](_0x56cebe(0x1ab)),dbPRUmember_log=firebase[_0x56cebe(0x1b1)]()[_0x56cebe(0x1ba)](_0x56cebe(0x19b)),CheckData();}function _0x58b4(_0x40416d,_0x569352){var _0xd19c01=_0xd19c();return _0x58b4=function(_0x58b462,_0x40ae5a){_0x58b462=_0x58b462-0x197;var _0x1e2614=_0xd19c01[_0x58b462];return _0x1e2614;},_0x58b4(_0x40416d,_0x569352);}function _0xd19c(){var _0x357660=['147558hbMJKO','then','1657509542-xzVB4wyX','1:653667385625:web:a5aed08500de80839f0588','id03','retailproject-6f4fc','replace','EmpID','BALife','CheckProfile','append','getMinutes','where','PRU\x20Pround','init','TotalPointRedeem','home.html','PRUmember_log','5436684VMZxJj','EmpName_PRU','getHours','182064DArVTR','doc','style','loading','41eNOnBZ','getMonth','length','floor','LineID','15jBOsem','now','3148236qODJml','PRUredeempoint','471288SBFthl','getFullYear','getSeconds','href','getItem','firestore','none','EmpID_PRU','isLoggedIn','limit','block','add','8287056USISLZ','getDate','collection','get','retailproject-6f4fc.appspot.com','getElementById','id02','test','TotalItemRedeem','empName','LinePicture','data','35470zxooYw','forEach','222','setItem','LineName','display','login','random'];_0xd19c=function(){return _0x357660;};return _0xd19c();}function CheckData(){var _0x57b88b=_0x3966b2;dbProfile[_0x57b88b(0x1d8)]('lineID','==',sessionStorage['getItem'](_0x57b88b(0x1a7)))[_0x57b88b(0x1b5)](0x1)[_0x57b88b(0x1bb)]()[_0x57b88b(0x1cd)](_0xc4d0aa=>{var _0x20e626=_0x57b88b;_0xc4d0aa[_0x20e626(0x1c5)](_0x484ce7=>{var _0x4aba71=_0x20e626;CheckFoundData=0x1,_0x484ce7[_0x4aba71(0x1c3)]()['statusconfirm']==0x1?(EidProfile=_0x484ce7['id'],sessionStorage[_0x4aba71(0x1c7)](_0x4aba71(0x1b3),_0x484ce7[_0x4aba71(0x1c3)]()['empID']),sessionStorage[_0x4aba71(0x1c7)](_0x4aba71(0x19d),_0x484ce7[_0x4aba71(0x1c3)]()[_0x4aba71(0x1c1)]),CheckMember()):alert('111'+sessionStorage[_0x4aba71(0x1b0)](_0x4aba71(0x1a7))+'\x0a'+sessionStorage[_0x4aba71(0x1b0)](_0x4aba71(0x1c8))+'\x0a'+sessionStorage[_0x4aba71(0x1b0)](_0x4aba71(0x1c2)));}),CheckFoundData==0x0&&alert(_0x20e626(0x1c6)+sessionStorage['getItem'](_0x20e626(0x1a7))+'\x0a'+sessionStorage[_0x20e626(0x1b0)]('LineName')+'\x0a'+sessionStorage[_0x20e626(0x1b0)](_0x20e626(0x1c2)));});}var EidUpdateLogin='',CountLogin=0x0,CheckFound=0x0;function CheckMember(){var _0x298122=_0x3966b2;dbSellerCampaign[_0x298122(0x1d8)](_0x298122(0x1d3),'==',parseFloat(sessionStorage[_0x298122(0x1b0)]('EmpID_PRU')))['where']('Product','==',xProduct)['limit'](0x1)['get']()['then'](_0x1eab4d=>{var _0x105536=_0x298122;_0x1eab4d['forEach'](_0x52e8be=>{var _0x15ed1e=_0x58b4;CheckFound=0x1,UpdatePorfile(),SaveBA_Log(),CheckNewRedeemPoint(),document[_0x15ed1e(0x1bd)](_0x15ed1e(0x1a2))[_0x15ed1e(0x1a1)][_0x15ed1e(0x1c9)]=_0x15ed1e(0x1b2),document[_0x15ed1e(0x1bd)]('OldSurvey')['style'][_0x15ed1e(0x1c9)]=_0x15ed1e(0x1b6);}),console['log'](CheckFound),CheckFound==0x0&&(document[_0x105536(0x1bd)](_0x105536(0x1a2))[_0x105536(0x1a1)][_0x105536(0x1c9)]='none',document['getElementById']('NoService')[_0x105536(0x1a1)][_0x105536(0x1c9)]=_0x105536(0x1b6));});}function UpdatePorfile(){var _0x13bc8c=_0x3966b2;dbProfile[_0x13bc8c(0x1a0)](EidProfile)['update']({'empPicture':sessionStorage[_0x13bc8c(0x1b0)](_0x13bc8c(0x1c2)),'linename':sessionStorage['getItem'](_0x13bc8c(0x1c8))});}function SaveBA_Log(){var _0x37fa8a=_0x3966b2;NewDate();var _0x43b5b8=Math['round'](Date[_0x37fa8a(0x1a9)]()/0x3e8);dbPRUmember_log[_0x37fa8a(0x1b7)]({'LineID':sessionStorage[_0x37fa8a(0x1b0)](_0x37fa8a(0x1a7)),'LineName':sessionStorage[_0x37fa8a(0x1b0)](_0x37fa8a(0x1c8)),'LinePicture':sessionStorage[_0x37fa8a(0x1b0)]('LinePicture'),'EmpID':sessionStorage['getItem'](_0x37fa8a(0x1b3)),'EmpName':sessionStorage['getItem'](_0x37fa8a(0x19d)),'PageVisit':_0x37fa8a(0x197),'LogDateTime':dateString,'LogTimeStamp':_0x43b5b8});}var sCheckTNIapprove=0x0;function CheckNewRedeemPoint(){var _0x11f119=_0x3966b2;dbPRUredeemPoint['where'](_0x11f119(0x1d3),'==',parseFloat(sessionStorage[_0x11f119(0x1b0)](_0x11f119(0x1b3))))[_0x11f119(0x1b5)](0x1)[_0x11f119(0x1bb)]()[_0x11f119(0x1cd)](_0xf66f9c=>{var _0x2ef1b7=_0x11f119;_0xf66f9c[_0x2ef1b7(0x1c5)](_0x44d1da=>{var _0x1ad02a=_0x2ef1b7;sCheckTNIapprove=0x1,sessionStorage[_0x1ad02a(0x1c7)](_0x1ad02a(0x199),_0x44d1da[_0x1ad02a(0x1c3)]()['TotalPointRedeem']),sessionStorage[_0x1ad02a(0x1c7)](_0x1ad02a(0x1c0),_0x44d1da[_0x1ad02a(0x1c3)]()[_0x1ad02a(0x1c0)]);}),sCheckTNIapprove==0x0&&(dbPRUredeemPoint[_0x2ef1b7(0x1b7)]({'EmpID':parseFloat(sessionStorage[_0x2ef1b7(0x1b0)](_0x2ef1b7(0x1b3))),'TotalPointRedeem':0x0,'TotalItemRedeem':0x0,'DateRedeem':''}),sessionStorage[_0x2ef1b7(0x1c7)](_0x2ef1b7(0x199),0x0),sessionStorage['setItem'](_0x2ef1b7(0x1c0),0x0));});}function DisplayQRCode(){var _0x34fd33=_0x3966b2;document[_0x34fd33(0x1bd)]('id03')['style'][_0x34fd33(0x1c9)]='block';}function NewDate(){var _0x4dccb3=_0x3966b2,_0x4804df=new Date(),_0x19a9fb=_0x4804df[_0x4dccb3(0x1b9)]()+'',_0x307b0e=_0x4804df[_0x4dccb3(0x1a4)]()+0x1+'',_0x29359e=_0x4804df[_0x4dccb3(0x1ad)]()+'',_0x1cb66e=_0x4804df[_0x4dccb3(0x19e)]()+'',_0x3be166=_0x4804df['getMinutes']()+'',_0xc97cd8=_0x4804df[_0x4dccb3(0x1ae)]()+'',_0xa045a9=_0x1cb66e>=0xc?'PM':'AM';_0x19a9fb=checkZero(_0x19a9fb),_0x307b0e=checkZero(_0x307b0e),_0x29359e=checkZero(_0x29359e),_0x1cb66e=checkZero(_0x1cb66e),_0x3be166=checkZero(_0x3be166),_0xc97cd8=checkZero(_0xc97cd8),dateString=_0x19a9fb+'/'+_0x307b0e+'/'+_0x29359e+'\x20'+_0x1cb66e+':'+_0x3be166+':'+_0xc97cd8+'\x20'+_0xa045a9;}function checkZero(_0x5eac45){var _0x36f5ee=_0x3966b2;return _0x5eac45[_0x36f5ee(0x1a5)]==0x1&&(_0x5eac45='0'+_0x5eac45),_0x5eac45;}function GotoWeb(){var _0x435d2d=_0x3966b2;window['location'][_0x435d2d(0x1af)]=_0x435d2d(0x19a);}function random_item(_0x533787){var _0x33e688=_0x3966b2;return _0x533787[Math[_0x33e688(0x1a6)](Math[_0x33e688(0x1cb)]()*_0x533787[_0x33e688(0x1a5)])];}function addCommas(_0x2b29f5){var _0x394c2b=_0x3966b2;_0x2b29f5+='',x=_0x2b29f5['split']('.'),x1=x[0x0],x2=x[_0x394c2b(0x1a5)]>0x1?'.'+x[0x1]:'';var _0x47ae77=/(\d+)(\d{3})/;while(_0x47ae77[_0x394c2b(0x1bf)](x1)){x1=x1[_0x394c2b(0x1d2)](_0x47ae77,'$1'+','+'$2');}return x1+x2;}function NewDate(){var _0x2c2e99=_0x3966b2,_0xae7c09=new Date(),_0x2af50b=_0xae7c09['getDate']()+'',_0x445517=_0xae7c09[_0x2c2e99(0x1a4)]()+0x1+'',_0xcbe077=_0xae7c09['getFullYear']()+'',_0x93f7e8=_0xae7c09[_0x2c2e99(0x19e)]()+'',_0x42067e=_0xae7c09[_0x2c2e99(0x1d7)]()+'',_0x40fd1d=_0xae7c09[_0x2c2e99(0x1ae)]()+'',_0xfefcb8=_0x93f7e8>=0xc?'PM':'AM';_0x2af50b=checkZero(_0x2af50b),_0x445517=checkZero(_0x445517),_0xcbe077=checkZero(_0xcbe077),_0x93f7e8=checkZero(_0x93f7e8),_0x42067e=checkZero(_0x42067e),_0x40fd1d=checkZero(_0x40fd1d),dateString=_0x2af50b+'/'+_0x445517+'/'+_0xcbe077+'\x20'+_0x93f7e8+':'+_0x42067e+':'+_0x40fd1d+'\x20'+_0xfefcb8;}function checkZero(_0x349b4d){var _0x3f7b51=_0x3966b2;return _0x349b4d[_0x3f7b51(0x1a5)]==0x1&&(_0x349b4d='0'+_0x349b4d),_0x349b4d;}function CloseAll(){var _0x2c9a2d=_0x3966b2;document[_0x2c9a2d(0x1bd)](_0x2c9a2d(0x1be))[_0x2c9a2d(0x1a1)]['display']=_0x2c9a2d(0x1b2),document[_0x2c9a2d(0x1bd)](_0x2c9a2d(0x1d0))[_0x2c9a2d(0x1a1)][_0x2c9a2d(0x1c9)]=_0x2c9a2d(0x1b2);}
